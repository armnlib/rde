#!/bin/ksh
. .rdebase.inc.dot

DESC='Find the list of targets in Makefiles'
USAGE="USAGE: ${MYSELF}"
usage_long() {
	 toto=$(echo -e $USAGE)
	 more <<EOF
$DESC

$toto
EOF
}

if [[ x$1 == x-h || x$1 == x--help ]] ; then
   usage_long
   exit 0
fi

findtargetfn() {
   for item in Makefile* $(rdelocate Makefile.local.mk); do
      .rdefindtargetsinfile --nodep --norules $item
   done
   #find -L $BUILD/ -name 'Makefile*' -exec .rdefindtargetsinfile --nodep --norules {} \;
}

findtargetfn | sort -u | grep -v .SILENT | grep -v .SUFFIXES
