#!/bin/ksh
# @Object: Return the path to the model link name specified as the argument
# @Author: S.Chamberland
# @Date:   March 2014

# Display help in xterm if user clicked on the file 
#if [[ -z $@ && $DISPLAY ]] && ! tty -s; then 
#    xterm -hold -e "$(dirname "$0")/$(basename "$0")" -h; exit 
#fi 

DESC='Return the path to the model link name specified as the argument'
USAGE="Usage: ${0##*/} [build,src,ref,local,bin]"

if [[ x$1 == x-h || x$1 == x--help ]] ; then
	 more <<EOF
$DESC

$USAGE

EOF
    exit 0
fi

# Check for required argument (becomes "mytype")
if [[ -z "$1" ]] ; then
   printf "$USAGE\n"
   exit 1
fi
mytype=$1

buildsubdirslean="src pre obj"
buildsubdirs="${buildsubdirslean} mod lib bin"
COMP_ARCH0=${EC_ARCH##*/}
hostarch=-${TRUE_HOST}-${COMP_ARCH:-${COMP_ARCH0:-unknown}}

mylist="\
:local/src=src;\
:local/bin=bin;\
:ref/src=ref/src;\
:ref/bin=ref/bin;\
:build=build${hostarch};\
:build-=${buildsubdirslean}\
"
for item in ${buildsubdirs} ; do
   mylist="${mylist};:build/${item}=build${hostarch}/${item}"
done

if [[ x${mytype} == x-l ]] ; then
   if [[ x$2 == xbuild ]] ; then
      echo ${buildsubdirs}
   elif [[ x$2 == xbuild- ]] ; then
      echo ${buildsubdirslean}
   else
      echo ${mylist} | tr ';:' '\n ' | cut -d= -f2
   fi
elif [[ x${mytype} == x-h ]] ; then
   echo ${mylist} | tr ';:' '\n ' | cut -d= -f1
else
   echo ${mylist} | tr ';' '\n' | grep :${mytype}= | cut -d= -f2
fi
